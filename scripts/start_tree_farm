assert(os.loadAPI("api/service"), "Required API missing: service")
assert(os.loadAPI("api/treefarmservice"), "Required API missing: treefarmservice")
local svc = service
local tfsvc = treefarmservice

mainServer = "Computer_13"

rednet.open(svc.getModemSide())
ids = {rednet.lookup(tfsvc.TREE_FARM_SERVICE_PROTOCOL)}
if table.maxn(ids) == 0 then
  error("No host found")
end


local commandName = tfsvc.TreeFarmServiceCommands.start
command = svc.Command(commandName)
for _, id in pairs(ids) do
  print("Sending start to "..tostring(id))
  rednet.send(id, command, tfsvc.TREE_FARM_SERVICE_PROTOCOL)
end
